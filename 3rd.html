<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>points show</title>
<link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700&display=swap" rel="stylesheet">
<style>
body {
  font-family: "Tajawal", sans-serif;
  margin: 0; padding: 0;
  background: linear-gradient(135deg, #74b9ff, #a29bfe, #ffeaa7, #fab1a0);
  background-size: 400% 400%;
  animation: gradientBG 15s ease infinite;
  display: flex; justify-content: center; align-items: center;
  height: 100vh; flex-direction: column;
  overflow: hidden;
}
@keyframes gradientBG {
  0%{background-position:0% 50%}
  50%{background-position:100% 50%}
  100%{background-position:0% 50%}
}
#welcome, #pointsPage {
  display: none;
  text-align: center;
  position: relative;
  z-index: 10; /* Ø¹Ù„Ø´Ø§Ù† ØªØ¨Ù‚Ù‰ ÙÙˆÙ‚ Ø´Ø®ØµÙŠØ© Ø²ÙŠØ²Ùˆ */
}
h1 { font-size: 2.4em; color: #2d3436; text-shadow: 2px 2px 5px rgba(0,0,0,0.1); margin-bottom: 20px; }
button {
  background: linear-gradient(45deg, #fd79a8, #e84393);
  color: white; border: none;
  padding: 14px 28px; border-radius: 12px; cursor: pointer;
  font-size: 1.2em; transition: transform 0.3s ease, box-shadow 0.3s ease;
}
button:hover {
  transform: scale(1.05);
  box-shadow: 0 6px 15px rgba(0,0,0,0.2);
}
.container {
  background: rgba(255,255,255,0.95);
  padding: 25px 20px;
  border-radius: 20px;
  box-shadow: 0 8px 20px rgba(0,0,0,0.25);
  width: 90%; max-width: 360px;
  box-sizing: border-box;
  z-index: 2;
  position: relative;
}
.container > * { margin-bottom: 16px; }
input {
  width: 100%; padding: 14px;
  border: 1px solid #ccc; border-radius: 12px;
  font-size: 1.1em;
  transition: border 0.3s ease, box-shadow 0.3s ease;
  box-sizing: border-box;
}
input:focus {
  border-color: #6c5ce7;
  box-shadow: 0 0 8px rgba(108,92,231,0.5);
  outline: none;
}
.suggestions {
  background: #fff; border-radius: 12px; border: 1px solid #ddd;
  max-height: 150px; overflow-y: auto;
}
.suggestions div {
  padding: 10px; cursor: pointer; transition: background 0.3s ease;
  font-size: 1em;
}
.suggestions div:hover { background: #dfe6e9; }
#result {
  background: #f1f2f6;
  padding: 14px;
  border-radius: 12px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
  font-size: 1.2em;
  color: #2d3436;
  transition: opacity 0.5s ease;
}

/* Ø´Ø®ØµÙŠØ© Ø²ÙŠØ²Ùˆ */
#zizo-container {
  position: fixed;
  bottom: 0;
  left: 50%;
  transform: translateX(-50%);
  width: 300px;
  height: 300px;
  z-index: 1;
  pointer-events: none;
  opacity: 0.9;
}

/* ÙÙ‚Ø§Ø¹Ø§Øª */
.float-layer{position:fixed;inset:0;pointer-events:none;z-index:0}
.bubble{
  position:absolute; width:26px; height:26px; border-radius:50%;
  background:rgba(255,255,255,0.7);
  box-shadow:0 4px 10px rgba(0,0,0,0.1);
  animation: rise linear infinite;
}
@keyframes rise{
  0%{transform:translateY(110vh) scale(0.8); opacity:0}
  10%{opacity:1}
  100%{transform:translateY(-20vh) scale(1.2); opacity:0}
}
</style>
</head>
<body>

<!-- ÙÙ‚Ø§Ø¹Ø§Øª -->
<div class="float-layer" id="floatLayer"></div>
  
<!-- Ø§Ù„ØµÙØ­Ø© Ø§Ù„ØªØ±Ø­ÙŠØ¨ÙŠØ© -->
<div id="welcome">
  <h1>ğŸ¯ Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ ğŸ¯</h1>
  <button onclick="goToPoints()">Ø´ÙˆÙ Ù†Ù‚Ø§Ø·Ùƒ â­</button>
</div>

<!-- ØµÙØ­Ø© Ø¹Ø±Ø¶ Ø§Ù„Ù†Ù‚Ø§Ø· -->
<div id="pointsPage">
  <div class="container">
    <h2>Ø´ÙˆÙ Ù†Ù‚Ø§Ø·Ùƒ â­</h2>
    <input id="nameInput" placeholder="Ø§ÙƒØªØ¨ Ø§Ø³Ù…Ùƒ Ù‡Ù†Ø§">
    <div class="suggestions" id="suggestions"></div>
    <button onclick="getPoints()">Ø§Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªÙŠØ¬Ø©</button>
    <div id="result"></div>
  </div>
</div>

  <!-- Ø´Ø®ØµÙŠØ© Ø²ÙŠØ²Ùˆ -->
<div id="zizo-container">
<?xml version="1.0" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 20010904//EN"
 "http://www.w3.org/TR/2001/REC-SVG-20010904/DTD/svg10.dtd">
<svg version="1.0" xmlns="http://www.w3.org/2000/svg"
 width="300.000000pt" height="450.000000pt" viewBox="0 0 300.000000 450.000000"
 preserveAspectRatio="xMidYMid meet">
<metadata>
Created by potrace 1.10, written by Peter Selinger 2001-2011
</metadata>
<g transform="translate(0.000000,450.000000) scale(0.100000,-0.100000)"
fill="#000000" stroke="none">
<path d="M1280 4069 c-87 -15 -194 -71 -254 -133 -41 -42 -65 -57 -109 -70
-103 -30 -189 -119 -222 -229 -18 -61 -20 -219 -3 -318 l11 -70 -42 -35 c-75
-65 -98 -147 -70 -249 15 -56 89 -126 154 -145 42 -13 53 -22 71 -57 66 -130
127 -201 216 -251 27 -15 48 -30 48 -33 0 -3 -37 -18 -82 -33 -177 -56 -486
-294 -593 -456 -25 -37 -57 -99 -72 -136 -24 -61 -27 -83 -28 -189 0 -142 17
-204 93 -330 26 -43 66 -116 90 -161 30 -57 60 -99 101 -136 50 -47 61 -63 79
-124 26 -84 47 -106 136 -138 38 -14 70 -26 71 -28 7 -7 22 -154 17 -170 -2
-9 -18 -22 -35 -28 -39 -13 -122 -100 -106 -110 7 -5 8 -10 1 -14 -12 -7 -10
-40 2 -68 12 -26 40 -31 161 -30 60 0 160 1 222 1 111 1 113 1 147 31 30 26
36 39 41 88 4 31 9 68 11 82 10 62 13 79 19 135 4 33 12 66 17 72 6 7 30 13
54 13 39 0 56 -9 60 -35 10 -57 15 -93 24 -170 21 -170 46 -208 142 -218 41
-4 356 -3 415 2 7 1 21 10 32 22 44 48 5 143 -79 191 -22 13 -42 28 -44 35 -6
14 13 135 23 145 3 3 29 9 56 12 106 13 207 32 245 46 48 18 203 40 287 40
139 0 149 17 99 171 -47 144 -77 213 -172 402 l-64 129 19 26 c38 55 53 105
54 187 1 70 -3 89 -29 145 -55 117 -180 252 -354 383 -52 40 -103 80 -114 89
-26 24 -177 98 -199 98 -10 0 -24 6 -31 12 -11 10 -3 19 43 46 101 60 170 140
241 276 8 16 22 32 30 36 92 41 117 59 148 104 28 43 32 56 32 119 0 87 -28
140 -97 186 -27 18 -51 39 -54 48 -3 8 -1 45 4 82 7 46 6 97 -2 167 -13 101
-12 102 13 150 28 52 34 105 14 122 -7 5 -40 18 -73 27 -33 9 -148 59 -255
110 -107 52 -229 103 -270 115 -89 24 -214 33 -290 19z m290 -46 c47 -13 162
-62 257 -108 162 -79 281 -125 324 -125 10 0 19 -4 19 -9 0 -20 -30 -92 -50
-119 -20 -27 -21 -32 -7 -97 22 -111 6 -338 -23 -320 -6 4 -10 -5 -10 -19 0
-14 5 -26 10 -26 6 0 10 7 10 15 0 19 2 19 47 0 79 -33 117 -97 111 -186 -7
-92 -66 -157 -153 -167 -34 -3 -45 -9 -45 -22 0 -33 -62 -141 -113 -197 -58
-63 -148 -125 -217 -150 -44 -16 -45 -17 -42 -55 2 -21 8 -38 14 -38 5 0 7 9
3 19 -3 11 -2 21 2 24 17 9 132 -22 194 -53 170 -85 481 -362 547 -487 65
-123 64 -228 -2 -333 l-34 -53 30 -50 c75 -128 170 -343 221 -502 41 -127 53
-114 -108 -118 -123 -4 -157 -9 -280 -42 -81 -21 -175 -39 -222 -42 -93 -6
-85 2 -98 -113 -3 -30 -8 -67 -11 -81 -4 -23 0 -27 33 -37 44 -13 101 -64 109
-97 3 -12 4 -36 2 -51 l-3 -29 -237 -3 c-307 -3 -280 -23 -316 231 l-26 187
-82 0 -81 0 -13 -92 c-38 -282 -38 -282 -65 -306 -26 -22 -30 -22 -258 -20
l-232 3 -3 44 c-3 40 0 46 42 87 28 27 58 45 81 50 19 3 35 10 35 14 0 10 -20
169 -26 207 -4 26 -10 33 -28 33 -35 0 -122 28 -145 48 -17 15 -68 169 -58
179 2 1 19 -8 37 -22 35 -26 74 -33 85 -15 3 6 -5 10 -19 10 -31 0 -96 30 -96
44 0 6 -5 4 -10 -4 -8 -12 -16 -8 -51 25 -45 44 -119 150 -119 172 0 8 -18 37
-39 66 -94 126 -135 252 -129 392 11 210 117 364 398 574 170 127 269 174 385
183 37 3 40 1 39 -22 -4 -70 194 -150 330 -134 61 7 145 38 180 65 43 34 29
41 -16 9 -49 -34 -140 -60 -208 -60 -95 0 -252 59 -265 100 -4 11 -4 33 0 48
6 27 2 30 -79 70 -128 64 -215 160 -253 279 -16 50 -18 53 -50 53 -49 0 -94
22 -130 63 -70 80 -69 188 3 259 50 50 71 54 80 14 4 -17 15 -49 24 -71 10
-22 23 -59 29 -82 32 -119 155 -173 350 -152 94 11 150 32 221 84 26 19 58 35
71 35 13 0 45 -15 72 -34 72 -51 136 -75 239 -88 169 -21 260 15 312 127 20
41 26 70 26 120 0 42 -4 64 -10 60 -5 -3 -10 -32 -10 -63 0 -58 -25 -129 -58
-165 -36 -40 -93 -59 -189 -64 -58 -4 -103 -2 -116 5 -12 6 -44 18 -72 27 -27
9 -77 34 -111 56 -33 21 -68 39 -78 39 -20 0 -59 -19 -118 -59 -69 -46 -178
-74 -263 -67 -156 12 -213 49 -253 162 -37 104 -23 188 43 259 18 19 33 51 42
92 18 79 47 121 103 153 41 23 55 25 160 24 111 0 120 -2 265 -51 181 -62 277
-78 378 -62 94 14 160 46 227 110 30 28 46 45 35 38 -11 -8 -27 -20 -35 -28
-22 -21 -150 -79 -200 -90 -90 -20 -203 -6 -354 44 -77 25 -149 47 -160 50
-12 2 -21 4 -21 5 0 4 -46 10 -116 16 -88 8 -171 -12 -228 -55 -39 -29 -75
-102 -85 -173 -4 -25 -14 -52 -22 -59 -15 -12 -47 -66 -43 -71 7 -9 -24 -48
-37 -48 -37 0 -69 161 -62 306 6 110 31 183 86 245 36 41 108 79 162 86 31 4
44 13 66 44 33 48 125 111 195 134 117 39 217 39 359 -2z"/>
<path d="M2054 3579 c-10 -11 -31 -28 -46 -37 -23 -13 -28 -23 -28 -54 0 -62
21 -142 44 -163 11 -11 29 -31 38 -45 14 -19 16 -20 11 -5 -3 11 -16 34 -28
50 -20 26 -36 94 -40 160 0 11 17 41 38 68 39 47 47 65 11 26z"/>
<path d="M917 3358 c-14 -11 89 -13 528 -13 439 0 542 2 528 13 -13 9 -135 12
-528 12 -393 0 -515 -3 -528 -12z"/>
<path d="M1065 3284 c-63 -33 -89 -70 -100 -145 -20 -132 144 -243 260 -177
21 13 52 42 68 65 55 77 32 188 -49 243 -34 24 -53 30 -96 30 -29 0 -66 -7
-83 -16z m159 -33 c68 -45 89 -144 43 -212 -30 -45 -100 -74 -153 -65 -51 10
-110 69 -120 120 -9 53 20 123 65 153 44 30 123 31 165 4z"/>
<path d="M1091 3164 c-27 -35 -26 -59 4 -89 46 -47 115 -17 115 50 0 63 -80
89 -119 39z m79 -45 c0 -14 -7 -19 -25 -19 -18 0 -25 5 -25 19 0 11 6 21 13
24 20 7 37 -4 37 -24z"/>
<path d="M1655 3286 c-39 -17 -70 -52 -90 -98 -28 -68 -13 -138 41 -192 99
-99 264 -53 306 85 23 78 -19 167 -97 204 -40 18 -119 19 -160 1z m166 -39
c21 -14 41 -41 53 -69 17 -42 18 -52 7 -90 -35 -115 -174 -154 -254 -70 -69
72 -59 174 23 230 46 31 124 31 171 -1z"/>
<path d="M1688 3173 c-23 -27 -28 -51 -18 -78 20 -53 98 -58 123 -7 25 51 -4
102 -58 102 -18 0 -38 -8 -47 -17z m72 -54 c0 -14 -7 -19 -25 -19 -18 0 -25 5
-25 19 0 11 6 21 13 24 20 7 37 -4 37 -24z"/>
<path d="M1794 2808 c-6 -19 -20 -38 -34 -45 -16 -8 -19 -13 -9 -13 21 0 46
28 54 63 10 38 0 34 -11 -5z"/>
<path d="M1284 2746 c-15 -40 71 -85 161 -86 92 0 191 58 157 92 -9 9 -17 7
-36 -11 -55 -52 -163 -59 -225 -14 -45 33 -51 35 -57 19z"/>
<path d="M1417 2153 c-8 -10 -23 -37 -32 -60 -15 -38 -21 -43 -64 -52 -118
-25 -127 -46 -52 -113 l49 -43 -13 -60 c-11 -51 -11 -62 1 -75 12 -12 18 -12
34 -2 11 6 27 12 35 12 8 0 15 5 15 10 0 6 -15 4 -36 -5 -20 -8 -40 -13 -44
-10 -5 3 -2 33 6 67 l15 62 -51 51 c-27 28 -50 56 -50 62 0 6 33 19 73 28 l72
16 27 61 c15 33 33 58 39 56 6 -2 25 -29 42 -61 17 -31 34 -57 38 -57 9 0 -37
86 -59 113 -8 9 -18 17 -22 17 -4 0 -14 -8 -23 -17z"/>
<path d="M1598 2024 c34 -8 62 -18 62 -22 -1 -4 -21 -29 -46 -57 -44 -49 -45
-51 -39 -99 3 -28 11 -57 16 -65 7 -12 8 -10 5 9 -17 90 -16 96 8 129 14 19
34 42 46 53 11 10 20 23 20 29 0 13 -41 28 -93 34 -31 4 -25 1 21 -11z"/>
<path d="M818 2005 c-22 -29 -23 -36 -4 -29 14 6 40 54 28 54 -4 0 -15 -11
-24 -25z"/>
<path d="M1996 1890 c7 -115 8 -120 31 -114 10 3 28 -4 41 -16 17 -16 22 -17
22 -6 0 8 -8 17 -17 20 -10 4 -29 16 -43 27 -14 11 -19 18 -12 14 15 -8 15 -6
-8 90 l-19 80 5 -95z"/>
<path d="M1420 1795 c-24 -13 -23 -13 18 -8 31 4 42 2 42 -7 0 -7 3 -11 6 -7
3 3 21 -3 40 -14 38 -21 64 -25 64 -8 0 5 -5 7 -11 4 -6 -4 -37 7 -69 24 -67
36 -58 34 -90 16z"/>
<path d="M2013 1635 c0 -33 2 -45 4 -27 2 18 2 45 0 60 -2 15 -4 0 -4 -33z"/>
<path d="M2101 1562 c-1 -30 -62 -93 -69 -72 -3 8 -13 -10 -22 -40 l-17 -55
-99 -5 -99 -6 95 -4 95 -5 -4 -126 -3 -125 32 -27 c17 -15 39 -28 48 -28 9 -1
32 -3 50 -5 17 -2 32 0 32 5 0 5 11 12 25 15 29 7 65 44 64 65 0 11 -3 10 -9
-4 -21 -54 -108 -75 -179 -44 l-44 19 6 98 c4 53 7 125 7 160 0 38 4 62 11 62
6 0 22 9 36 20 14 11 23 20 19 20 -4 0 2 14 14 30 12 17 20 40 17 53 l-4 22
-2 -23z"/>
<path d="M2090 1471 c0 -3 16 -15 36 -26 46 -25 104 -100 104 -134 0 -45 -18
-93 -50 -133 l-31 -38 34 16 c36 17 51 51 66 145 5 35 4 46 -5 42 -6 -2 -14 7
-18 21 -10 39 -136 139 -136 107z"/>
<path d="M634 1399 c-10 -12 -42 -39 -70 -60 -28 -21 -54 -48 -57 -61 l-6 -23
22 25 c49 56 61 62 98 46 19 -8 61 -17 94 -21 33 -4 75 -11 93 -17 28 -8 33
-14 30 -36 -2 -20 -11 -29 -35 -36 -18 -5 -33 -13 -33 -17 0 -4 31 -27 70 -50
50 -29 70 -47 70 -61 0 -22 -53 -89 -79 -100 -13 -5 -12 -7 4 -7 12 -1 35 17
58 46 50 62 44 82 -48 146 -25 18 -25 18 -7 42 25 32 18 72 -17 89 -14 7 -57
16 -95 20 -59 6 -97 17 -115 32 -3 3 8 18 24 34 16 17 26 30 23 30 -3 0 -13
-10 -24 -21z"/>
<path d="M1432 1328 l1 -63 6 55 6 55 175 5 175 6 -182 2 -183 2 2 -62z"/>
<path d="M740 1111 c37 -31 107 -63 127 -59 12 3 4 9 -22 17 -22 7 -60 24 -85
38 -37 20 -41 21 -20 4z"/>
</g>
</svg>
</div>
<script>
const apiURL = "https://3rd-system-grades.johnmamdouh777.workers.dev/?name=";
let allNames = [];

// ØªØ´ØºÙŠÙ„ Ø£ÙˆÙ„ ØµÙØ­Ø©
window.addEventListener("DOMContentLoaded", () => {
  document.getElementById("welcome").style.display = "block";
  loadNames();
  generateBubbles();
});

// ØªØ­Ù…ÙŠÙ„ Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„Ø£Ø·ÙØ§Ù„
async function loadNames() {
  const cached = localStorage.getItem("allNames");
  if (cached) {
    allNames = JSON.parse(cached);
    return;
  }
  try {
    const res = await fetch(apiURL + "load_names");
    const data = await res.json();
    if (data.names) {
      allNames = data.names;
      localStorage.setItem("allNames", JSON.stringify(allNames));
    }
  } catch (err) {
    console.error("Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£Ø³Ù…Ø§Ø¡", err);
  }
}

// Ø§Ù‚ØªØ±Ø§Ø­ Ø§Ù„Ø£Ø³Ù…Ø§Ø¡
const nameInput = document.getElementById("nameInput");
nameInput.addEventListener("input", () => {
  const val = nameInput.value.trim();
  const box = document.getElementById("suggestions");
  box.innerHTML = "";
  if (!val) return;
  const matches = allNames.filter(n => n.includes(val)).slice(0,5);
  matches.forEach(name => {
    const div = document.createElement("div");
    div.textContent = name;
    div.onclick = () => { nameInput.value = name; box.innerHTML = ""; };
    box.appendChild(div);
  });
});

// Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù„ØµÙØ­Ø© Ø§Ù„Ù†Ù‚Ø§Ø·
function goToPoints() {
  document.getElementById("welcome").style.display = "none";
  document.getElementById("pointsPage").style.display = "block";
}

// Ø¬Ù„Ø¨ Ø§Ù„Ù†Ù‚Ø§Ø·
async function getPoints() {
  const name = nameInput.value.trim();
  const resultBox = document.getElementById("result");
  if (!allNames.includes(name)) {
    resultBox.innerText = "âŒ Ø§Ù„Ø§Ø³Ù… ØºÙŠØ± Ù…Ø³Ø¬Ù„";
    return;
  }
  const res = await fetch(apiURL + encodeURIComponent(name));
  const data = await res.json();
  if (data.error) {
    resultBox.innerText = data.error;
  } else {
    resultBox.style.opacity = 0;
    setTimeout(() => {
      resultBox.innerHTML = `
        ğŸ‘¤ Ø§Ù„Ø§Ø³Ù…: ${data.name}<br>
        â­ Ø§Ù„Ù†Ù‚Ø§Ø· Ø§Ù„ÙƒÙ„ÙŠØ©: ${data.total}<br>
        ğŸ Ø§Ù„Ù†Ù‚Ø§Ø· Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…Ø©: ${data.used}<br>
        â– Ø§Ù„Ù†Ù‚Ø§Ø· Ø§Ù„Ù…Ø®ØµÙˆÙ…Ø©: ${data.minus}<br>
        ğŸ† <strong>Ø§Ù„Ù…Ø­ØµÙ„Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©: ${data.final}</strong>
      `;
      resultBox.style.opacity = 1;
    }, 200);
  }
}

// ÙÙ‚Ø§Ø¹Ø§Øª
function generateBubbles() {
  const layer = document.getElementById('floatLayer');
  for(let i=0;i<24;i++){
    const b=document.createElement('div');
    b.className='bubble';
    b.style.left=Math.random()*100+'vw';
    b.style.animationDuration=(10+Math.random()*12)+'s';
    b.style.animationDelay=(Math.random()*5)+'s';
    b.style.opacity=0.6+Math.random()*0.4;
    layer.appendChild(b);
  }
}
</script>
