<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>points show</title>
<link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700&display=swap" rel="stylesheet">
<style>
body {
  font-family: "Tajawal", sans-serif;
  margin: 0; padding: 0;
  background: linear-gradient(135deg, #74b9ff, #a29bfe, #ffeaa7, #fab1a0);
  background-size: 400% 400%;
  animation: gradientBG 15s ease infinite;
  display: flex; justify-content: center; align-items: center;
  height: 100vh; flex-direction: column;
}
@keyframes gradientBG {
  0%{background-position:0% 50%}
  50%{background-position:100% 50%}
  100%{background-position:0% 50%}
}
#welcome, #pointsPage { display: none; text-align: center; }
h1 { font-size: 2.4em; color: #2d3436; text-shadow: 2px 2px 5px rgba(0,0,0,0.1); margin-bottom: 20px; }
button {
  background: linear-gradient(45deg, #fd79a8, #e84393);
  color: white; border: none;
  padding: 14px 28px; border-radius: 12px; cursor: pointer;
  font-size: 1.2em; transition: transform 0.3s ease, box-shadow 0.3s ease;
}
button:hover {
  transform: scale(1.05);
  box-shadow: 0 6px 15px rgba(0,0,0,0.2);
}
.container {
  background: rgba(255,255,255,0.95);
  padding: 25px 20px;
  border-radius: 20px;
  box-shadow: 0 8px 20px rgba(0,0,0,0.25);
  width: 90%; max-width: 360px;
  box-sizing: border-box;
}
.container > * { margin-bottom: 16px; }
input {
  width: 100%; padding: 14px;
  border: 1px solid #ccc; border-radius: 12px;
  font-size: 1.1em;
  transition: border 0.3s ease, box-shadow 0.3s ease;
  box-sizing: border-box;
}
input:focus {
  border-color: #6c5ce7;
  box-shadow: 0 0 8px rgba(108,92,231,0.5);
  outline: none;
}
.suggestions {
  background: #fff; border-radius: 12px; border: 1px solid #ddd;
  max-height: 150px; overflow-y: auto;
}
.suggestions div {
  padding: 10px; cursor: pointer; transition: background 0.3s ease;
  font-size: 1em;
}
.suggestions div:hover { background: #dfe6e9; }
#result {
  background: #f1f2f6;
  padding: 14px;
  border-radius: 12px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
  font-size: 1.2em;
  color: #2d3436;
  transition: opacity 0.5s ease;
}

/* Ø´Ø®ØµÙŠØ© Ø²ÙŠØ²Ùˆ */
.zizo{
  position:fixed; bottom:15px; left:15px; width:200px; height:200px; z-index:10;
  filter: drop-shadow(0 8px 18px rgba(0,0,0,0.25));
}
.zizo svg{width:100%; height:100%}
.breath{animation:breath 2.8s ease-in-out infinite; transform-origin:50% 70%}
@keyframes breath{
  0%,100%{transform:scale(1)}
  50%{transform:scale(1.02)}
}
.blink{animation:blink 4s ease-in-out infinite}
@keyframes blink{
  0%,92%,100%{transform:scaleY(1)}
  94%{transform:scaleY(0.05)}
  96%{transform:scaleY(1)}
}

/* ÙÙ‚Ø§Ø¹Ø§Øª */
.float-layer{position:fixed;inset:0;pointer-events:none;z-index:1}
.bubble{
  position:absolute; width:26px; height:26px; border-radius:50%;
  background:rgba(255,255,255,0.7);
  box-shadow:0 4px 10px rgba(0,0,0,0.1);
  animation: rise linear infinite;
}
@keyframes rise{
  0%{transform:translateY(110vh) scale(0.8); opacity:0}
  10%{opacity:1}
  100%{transform:translateY(-20vh) scale(1.2); opacity:0}
}
  .breath{animation:breath 3s ease-in-out infinite; transform-origin:50% 70%}
@keyframes breath{0%,100%{transform:scale(1)}50%{transform:scale(1.02)}}

.blink{animation:blink 4s ease-in-out infinite}
@keyframes blink{0%,92%,100%{transform:scaleY(1)}94%{transform:scaleY(0.05)}96%{transform:scaleY(1)}}

.cape{animation:capeSwing 2.5s ease-in-out infinite}
@keyframes capeSwing{
  0%,100%{transform:translateY(0) rotate(0deg)}
  50%{transform:translateY(-2px) rotate(2deg)}
}
</style>
</head>
<body>

<!-- ÙÙ‚Ø§Ø¹Ø§Øª Ø®Ù„ÙÙŠØ© -->
<div class="float-layer" id="floatLayer"></div>

<!-- Ø§Ù„ØµÙØ­Ø© Ø§Ù„ØªØ±Ø­ÙŠØ¨ÙŠØ© -->
<div id="welcome">
  <h1>ğŸ¯ Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ ğŸ¯</h1>
  <button onclick="goToPoints()">Ø´ÙˆÙ Ù†Ù‚Ø§Ø·Ùƒ â­</button>
</div>

  <!-- ØµÙØ­Ø© Ø¹Ø±Ø¶ Ø§Ù„Ù†Ù‚Ø§Ø· -->
<div id="pointsPage">
  <div class="container">
    <h2>Ø´ÙˆÙ Ù†Ù‚Ø§Ø·Ùƒ â­</h2>
    <input id="nameInput" placeholder="Ø§ÙƒØªØ¨ Ø§Ø³Ù…Ùƒ Ù‡Ù†Ø§">
    <div class="suggestions" id="suggestions"></div>
    <button onclick="getPoints()">Ø§Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªÙŠØ¬Ø©</button>
    <div id="result"></div>
  </div>
</div>

<!-- Ø´Ø®ØµÙŠØ© Ø²ÙŠØ²Ùˆ -->
<div class="zizo" aria-label="Ø·ÙÙ„ Ø³ÙˆØ¨Ø± Ù‡ÙŠØ±Ùˆ ÙˆØ§Ù‚Ø¹ÙŠ Ø¬Ø¯Ù‹Ø§">
<svg viewBox="0 0 900 1300" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <!-- Ø§Ù„Ø¨Ø´Ø±Ø© Ù…Ø¹ Ø¥Ø¶Ø§Ø¡Ø© -->
    <radialGradient id="skinLight" cx="45%" cy="35%" r="60%">
      <stop offset="0%" stop-color="#FFE0C8"/>
      <stop offset="100%" stop-color="#FFBFA0"/>
    </radialGradient>
    <radialGradient id="skinShadow" cx="55%" cy="65%" r="70%">
      <stop offset="0%" stop-color="#FFCB9A" stop-opacity="0"/>
      <stop offset="100%" stop-color="#D49A7F" stop-opacity="0.4"/>
    </radialGradient>

    <!-- Ø§Ù„Ø´Ø¹Ø± -->
    <radialGradient id="hairGrad" cx="50%" cy="25%" r="70%">
      <stop offset="0%" stop-color="#5C3A2E"/>
      <stop offset="100%" stop-color="#3F2A1F"/>
    </radialGradient>

    <!-- Ø§Ù„Ø¹ÙŠÙˆÙ† -->
    <radialGradient id="eyeGrad" cx="50%" cy="50%" r="50%">
      <stop offset="0%" stop-color="#fff"/>
      <stop offset="100%" stop-color="#bbb"/>
    </radialGradient>
    <radialGradient id="pupilGrad" cx="50%" cy="50%" r="50%">
      <stop offset="0%" stop-color="#263238"/>
      <stop offset="100%" stop-color="#000"/>
    </radialGradient>

    <!-- Ø§Ù„Ø¨Ø¯Ù„Ø© -->
    <linearGradient id="suitGrad" x1="0" y1="0" x2="0" y2="1">
      <stop offset="0%" stop-color="#2A86C8"/>
      <stop offset="100%" stop-color="#1E6EA8"/>
    </linearGradient>

    <!-- Ø§Ù„ÙƒØ§Ø¨ -->
    <linearGradient id="capeGrad" x1="0" y1="0" x2="1" y2="1">
      <stop offset="0%" stop-color="#E53945"/>
      <stop offset="100%" stop-color="#C72832"/>
    </linearGradient>

    <!-- Ø®Ø¯ÙˆØ¯ -->
    <radialGradient id="cheekGrad" cx="50%" cy="50%" r="50%">
      <stop offset="0%" stop-color="#FFA6C1" stop-opacity="0.8"/>
      <stop offset="100%" stop-color="#FF7F9D" stop-opacity="0.3"/>
    </radialGradient>

    <!-- Ø¸Ù„ Ø£Ø±Ø¶ÙŠ -->
    <radialGradient id="groundShadow" cx="50%" cy="50%" r="50%">
      <stop offset="0%" stop-color="#000" stop-opacity="0.25"/>
      <stop offset="100%" stop-color="#000" stop-opacity="0"/>
    </radialGradient>
  </defs>

  <!-- Ø§Ù„Ø±Ø£Ø³ -->
  <g class="breath">
    <ellipse cx="450" cy="240" rx="130" ry="140" fill="url(#skinLight)" stroke="#CC3A3A" stroke-width="4"/>
    <ellipse cx="450" cy="240" rx="130" ry="140" fill="url(#skinShadow)"/>
    
    <!-- Ø®Ø¯ÙˆØ¯ -->
    <circle cx="360" cy="240" r="14" fill="url(#cheekGrad)"/>
    <circle cx="540" cy="240" r="14" fill="url(#cheekGrad)"/>

    <!-- Ø§Ù„Ø´Ø¹Ø± -->
    <path d="M300 220 Q450 20 600 220 Q580 100 320 140 Z" fill="url(#hairGrad)"/>
    <path d="M320 220 Q450 25 580 220 Q560 120 340 140 Z" fill="#6D4C41"/>

    <!-- Ø§Ù„Ù‚Ù†Ø§Ø¹ -->
    <ellipse cx="450" cy="240" rx="75" ry="36" fill="#D62828"/>

    <!-- Ø§Ù„Ø¹ÙŠÙˆÙ† -->
    <ellipse cx="400" cy="240" rx="16" ry="20" fill="url(#eyeGrad)"/>
    <ellipse cx="500" cy="240" rx="16" ry="20" fill="url(#eyeGrad)"/>
    <circle cx="400" cy="240" r="7" fill="url(#pupilGrad)"/>
    <circle cx="500" cy="240" r="7" fill="url(#pupilGrad)"/>

    <!-- Ø§Ù„Ø­Ø§Ø¬Ø¨ÙŠÙ† -->
    <path d="M380 210 Q400 190 420 210" stroke="#263238" stroke-width="5"/>
    <path d="M480 210 Q500 190 520 210" stroke="#263238" stroke-width="5"/>

    <!-- Ø§Ù„Ø£Ù†Ù ÙˆØ§Ù„ÙÙ… -->
    <path d="M450 260 Q440 270 450 270" stroke="#263238" stroke-width="3"/>
    <path d="M400 290 Q450 310 500 290" stroke="#263238" stroke-width="4" fill="none" stroke-linecap="round"/>
    
    <!-- ØªÙØ§ØµÙŠÙ„ Ø¯Ù‚ÙŠÙ‚Ø© Ø§Ù„ÙˆØ¬Ù‡ -->
    <path d="M440 230 Q450 235 460 230" stroke="#AA7777" stroke-width="1.5"/>
    <path d="M430 250 Q450 255 470 250" stroke="#AA7777" stroke-width="1.5"/>
  </g>

  <!-- Ø§Ù„Ø±Ù‚Ø¨Ø© -->
  <rect x="425" y="370" width="50" height="36" rx="6" fill="url(#skinLight)"/>
  <rect x="425" y="370" width="50" height="36" rx="6" fill="url(#skinShadow)"/>

  <!-- Ø§Ù„Ø¬Ø°Ø¹ -->
  <path d="M300 420 c0 -20 24 -40 48 -40 h200 c24 0 48 20 48 40 v220 c0 60 -48 110 -92 120 c-44 -10 -92 -60 -92 -120 z" fill="url(#suitGrad)"/>

  <!-- Ø´Ø¹Ø§Ø± Ø§Ù„ØµØ¯Ø± -->
  <circle cx="450" cy="520" r="28" fill="#FFD166" stroke="#D62828" stroke-width="5"/>
  <polygon points="450,490 472,520 500,520 476,540 484,576 450,550 416,576 424,540 400,520 428,520" fill="#fff"/>

  <!-- Ø§Ù„ÙƒØ§Ø¨ -->
  <path class="cape" d="M300 420 Q450 80 600 420" fill="url(#capeGrad)" opacity="0.95"/>

  <!-- Ø§Ù„Ø°Ø±Ø§Ø¹Ø§Ù† -->
  <g class="arms">
    <path d="M300 420 c-24 24 -44 56 -36 96 c20 36 44 36 56 20 c12 -18 24 -40 30 -60 z" fill="url(#skinLight)"/>
    <path d="M260 500 l6 -14 l8 0 l2 14" stroke="#FFD9B0" stroke-width="5"/>
    <path d="M600 420 c24 24 44 56 36 96 c-20 36 -44 36 -56 20 c-12 -18 -24 -40 -30 -60 z" fill="url(#skinLight)"/>
    <path d="M640 500 l-6 -14 l-8 0 l-2 14" stroke="#FFD9B0" stroke-width="5"/>
  </g>

  <!-- Ø§Ù„Ø£Ø±Ø¬Ù„ -->
  <path d="M370 640 v200 h50 v-200 z" fill="url(#suitGrad)"/>
  <path d="M480 640 v200 h50 v-200 z" fill="url(#suitGrad)"/>

  <!-- Ø§Ù„Ø£Ø­Ø°ÙŠØ© -->
  <rect x="370" y="840" width="50" height="24" rx="8" fill="#6D4C41"/>
  <rect x="480" y="840" width="50" height="24" rx="8" fill="#6D4C41"/>

  <!-- Ø¸Ù„ Ø£Ø±Ø¶ÙŠ ÙˆØ§Ù‚Ø¹ÙŠ -->
  <ellipse cx="450" cy="880" rx="160" ry="40" fill="url(#groundShadow)"/>
</svg>
</div>
<script>
const apiURL = "https://3rd-system-grades.johnmamdouh777.workers.dev/?name=";
let allNames = [];

// ØªØ´ØºÙŠÙ„ Ø£ÙˆÙ„ ØµÙØ­Ø©
window.addEventListener("DOMContentLoaded", () => {
  document.getElementById("welcome").style.display = "block";
  loadNames();
});

// ØªØ­Ù…ÙŠÙ„ Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„Ø£Ø·ÙØ§Ù„
async function loadNames() {
  const cached = localStorage.getItem("allNames");
  if (cached) {
    allNames = JSON.parse(cached);
    return;
  }
  try {
    const res = await fetch(apiURL + "load_names");
    const data = await res.json();
    if (data.names) {
      allNames = data.names;
      localStorage.setItem("allNames", JSON.stringify(allNames));
    }
  } catch (err) {
    console.error("Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£Ø³Ù…Ø§Ø¡", err);
  }
}
  
// Ø§Ù‚ØªØ±Ø§Ø­ Ø§Ù„Ø£Ø³Ù…Ø§Ø¡ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„ÙƒØªØ§Ø¨Ø©
const nameInput = document.getElementById("nameInput");
nameInput.addEventListener("input", () => {
  const val = nameInput.value.trim();
  const box = document.getElementById("suggestions");
  box.innerHTML = "";
  if (!val) return;
  const matches = allNames.filter(n => n.includes(val)).slice(0,5);
  matches.forEach(name => {
    const div = document.createElement("div");
    div.textContent = name;
    div.onclick = () => { nameInput.value = name; box.innerHTML = ""; };
    box.appendChild(div);
  });
});

// Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù„ØµÙØ­Ø© Ø§Ù„Ù†Ù‚Ø§Ø·
function goToPoints() {
  document.getElementById("welcome").style.display = "none";
  document.getElementById("pointsPage").style.display = "block";
}

// Ø¬Ù„Ø¨ Ø§Ù„Ù†Ù‚Ø§Ø·
async function getPoints() {
  const name = nameInput.value.trim();
  const resultBox = document.getElementById("result");
  if (!allNames.includes(name)) {
    resultBox.innerText = "âŒ Ø§Ù„Ø§Ø³Ù… ØºÙŠØ± Ù…Ø³Ø¬Ù„";
    return;
  }
  const res = await fetch(apiURL + encodeURIComponent(name));
  const data = await res.json();
  if (data.error) {
    resultBox.innerText = data.error;
  } else {
    resultBox.style.opacity = 0;
    setTimeout(() => {
      resultBox.innerHTML = `
        ğŸ‘¤ Ø§Ù„Ø§Ø³Ù…: ${data.name}<br>
        â­ Ø§Ù„Ù†Ù‚Ø§Ø· Ø§Ù„ÙƒÙ„ÙŠØ©: ${data.total}<br>
        ğŸ Ø§Ù„Ù†Ù‚Ø§Ø· Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…Ø©: ${data.used}<br>
        â– Ø§Ù„Ù†Ù‚Ø§Ø· Ø§Ù„Ù…Ø®ØµÙˆÙ…Ø©: ${data.minus}<br>
        ğŸ† <strong>Ø§Ù„Ù…Ø­ØµÙ„Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©: ${data.final}</strong>
      `;
      resultBox.style.opacity = 1;
    }, 200);
  }
}

// ØªÙˆÙ„Ø¯ ÙÙ‚Ø§Ø¹Ø§Øª Ø¹Ø´ÙˆØ§Ø¦ÙŠØ©
const layer = document.getElementById('floatLayer');
for(let i=0;i<24;i++){
  const b=document.createElement('div');
  b.className='bubble';
  b.style.left=Math.random()*100+'vw';
  b.style.animationDuration=(10+Math.random()*12)+'s';
  b.style.animationDelay=(Math.random()*5)+'s';
  b.style.opacity=0.6+Math.random()*0.4;
  layer.appendChild(b);
}

// Ø²Ø± Ø§Ø­ØªÙØ§Ù„: ÙƒÙˆÙ†ÙÙŠØªÙŠ
document.addEventListener('keydown', (e)=>{
  if(e.key==="Enter"){celebrate();}
});
function celebrate(){
  for(let i=0;i<40;i++){
    const conf=document.createElement('div');
    conf.style.position='fixed';
    conf.style.left=Math.random()*100+'vw';
    conf.style.top='-10vh';
    conf.style.width='10px';
    conf.style.height='16px';
    conf.style.background=['#FF6B6B','#2EC4B6','#FFA6C1','#FFD166'][Math.floor(Math.random()*4)];
    conf.style.transform=`rotate(${Math.random()*360}deg)`;
    conf.style.zIndex=4;
    conf.style.borderRadius='3px';
    conf.style.boxShadow='0 2px 6px rgba(0,0,0,0.2)';
    document.body.appendChild(conf);
    const duration=8+Math.random()*6;
    conf.animate([
      { transform: conf.style.transform, top: '-10vh', opacity: 1 },
      { transform: `translateY(100vh) rotate(${Math.random()*360}deg)`, top: '100vh', opacity: 0.8 }
    ], { duration: duration*1000, easing: 'cubic-bezier(.25,.8,.25,1)' }).onfinish=()=>conf.remove();
  }
}
</script>
</body>
</html>
