<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>points show</title>
<link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700&display=swap" rel="stylesheet">
<style>
body {
Â  font-family: "Tajawal", sans-serif;
Â  margin: 0; padding: 0;
Â  background: linear-gradient(135deg, #74b9ff, #a29bfe, #ffeaa7, #fab1a0);
Â  background-size: 400% 400%;
Â  animation: gradientBG 15s ease infinite;
Â  display: flex; justify-content: center; align-items: center;
Â  height: 100vh; flex-direction: column;
}
@keyframes gradientBG {
Â  0%{background-position:0% 50%}
Â  50%{background-position:100% 50%}
Â  100%{background-position:0% 50%}
}
#welcome, #pointsPage { display: none; text-align: center; }
h1 { font-size: 2.4em; color: #2d3436; text-shadow: 2px 2px 5px rgba(0,0,0,0.1); margin-bottom: 20px; }
button {
Â  background: linear-gradient(45deg, #fd79a8, #e84393);
Â  color: white; border: none;
Â  padding: 14px 28px; border-radius: 12px; cursor: pointer;
Â  font-size: 1.2em; transition: transform 0.3s ease, box-shadow 0.3s ease;
}
button:hover {
Â  transform: scale(1.05);
Â  box-shadow: 0 6px 15px rgba(0,0,0,0.2);
}
.container {
Â  background: rgba(255,255,255,0.95);
Â  padding: 25px 20px;
Â  border-radius: 20px;
Â  box-shadow: 0 8px 20px rgba(0,0,0,0.25);
Â  width: 90%; max-width: 360px;
Â  box-sizing: border-box;
}
.container > * { margin-bottom: 16px; }
input {
Â  width: 100%; padding: 14px;
Â  border: 1px solid #ccc; border-radius: 12px;
Â  font-size: 1.1em;
Â  transition: border 0.3s ease, box-shadow 0.3s ease;
Â  box-sizing: border-box;
}
input:focus {
Â  border-color: #6c5ce7;
Â  box-shadow: 0 0 8px rgba(108,92,231,0.5);
Â  outline: none;
}
.suggestions {
Â  background: #fff; border-radius: 12px; border: 1px solid #ddd;
Â  max-height: 150px; overflow-y: auto;
}
.suggestions div {
Â  padding: 10px; cursor: pointer; transition: background 0.3s ease;
Â  font-size: 1em;
}
.suggestions div:hover { background: #dfe6e9; }
#result {
Â  background: #f1f2f6;
Â  padding: 14px;
Â  border-radius: 12px;
Â  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
Â  font-size: 1.2em;
Â  color: #2d3436;
Â  transition: opacity 0.5s ease;
}

/* Ø´Ø®ØµÙŠØ© Ø²ÙŠØ²Ùˆ: Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø«Ø§Ø¨Øª */
.zizo{
Â  position:fixed; bottom:15px; left:15px; width:200px; height:200px; z-index:10;
Â  filter: drop-shadow(0 8px 18px rgba(0,0,0,0.25));
Â  transition: transform 0.3s ease; /* Ù„Ø¥Ø¶Ø§ÙØ© Ø³Ù„Ø§Ø³Ø© Ø¹Ù†Ø¯ ØªØºÙŠÙŠØ± Ø§Ù„Ø­Ø§Ù„Ø© */
}
.zizo svg{width:100%; height:100%}

/* Ø­Ø±ÙƒØ© Ø§Ù„Ù†Ø¨Ø¶ (Breathing) */
.breath{animation:breath 2.8s ease-in-out infinite; transform-origin:50% 70%}
@keyframes breath{
Â  0%,100%{transform:scale(1)}
Â  50%{transform:scale(1.02)}
}

/* Ø­Ø±ÙƒØ© Ø§Ù„Ø±Ù…Ø´ (Blinking) */
.blink{animation:blink 4s ease-in-out infinite}
@keyframes blink{
Â  0%,92%,100%{transform:scaleY(1)}
Â  94%{transform:scaleY(0.05)}
Â  96%{transform:scaleY(1)}
}

/* --- Ø­Ø§Ù„Ø§Øª Ø§Ù„ØªÙØ§Ø¹Ù„ Ù„Ø²ÙŠØ²Ùˆ --- */

/* 1. Ø­Ø§Ù„Ø© Ø§Ù„ØªÙÙƒÙŠØ±/Ø§Ù„ÙƒØªØ§Ø¨Ø© */
.zizo.thinking {
Â  transform: rotate(-5deg); /* ÙŠÙ…ÙŠÙ„ Ø±Ø£Ø³Ù‡ Ù‚Ù„ÙŠÙ„Ø§Ù‹ */
}

/* 2. Ø­Ø§Ù„Ø© Ø§Ù„Ø§Ø­ØªÙØ§Ù„ Ø¨Ø§Ù„Ù†ØªÙŠØ¬Ø© */
.zizo.result {
Â  animation: jump 0.6s ease-out; /* Ø­Ø±ÙƒØ© Ù„Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø© */
Â  transform-origin: bottom;
}
@keyframes jump {
Â  0% { transform: translateY(0) rotate(0deg); }
Â  50% { transform: translateY(-30px) scale(1.05) rotate(5deg); }
Â  100% { transform: translateY(0) rotate(0deg); }
}

/* 3. Ø­Ø§Ù„Ø© Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± */
.zizo.waiting .hand-arm {
Â  /* Ø­Ø±ÙƒØ© Ø§Ù„Ø°Ø±Ø§Ø¹ Ù„ØªØ¹Ø¨Ø± Ø¹Ù† Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± */
Â  animation: tapFoot 0.8s ease-in-out infinite alternate;
}
@keyframes tapFoot {
Â  0% { transform: translateY(0); }
Â  100% { transform: translateY(5px); }
}


/* ÙÙ‚Ø§Ø¹Ø§Øª */
.float-layer{position:fixed;inset:0;pointer-events:none;z-index:1}
.bubble{
Â  position:absolute; width:26px; height:26px; border-radius:50%;
Â  background:rgba(255,255,255,0.7);
Â  box-shadow:0 4px 10px rgba(0,0,0,0.1);
Â  animation: rise linear infinite;
}
@keyframes rise{
Â  0%{transform:translateY(110vh) scale(0.8); opacity:0}
Â  10%{opacity:1}
Â  100%{transform:translateY(-20vh) scale(1.2); opacity:0}
}
</style>
</head>
<body>

<div class="float-layer" id="floatLayer"></div>

<div id="welcome">
Â  <h1>ğŸ¯ Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ ğŸ¯</h1>
Â  <button onclick="goToPoints()">Ø´ÙˆÙ Ù†Ù‚Ø§Ø·Ùƒ â­</button>
</div>

<div id="pointsPage">
Â  <div class="container">
Â  Â  <h2>Ø´ÙˆÙ Ù†Ù‚Ø§Ø·Ùƒ â­</h2>
Â  Â  <input id="nameInput" placeholder="Ø§ÙƒØªØ¨ Ø§Ø³Ù…Ùƒ Ù‡Ù†Ø§">
Â  Â  <div class="suggestions" id="suggestions"></div>
Â  Â  <button onclick="getPoints()">Ø§Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªÙŠØ¬Ø©</button>
Â  Â  <div id="result"></div>
Â  </div>
</div>

<div class="zizo" aria-label="Ø´Ø®ØµÙŠØ© Ø²ÙŠØ²Ùˆ Ø§Ù„Ø³ÙˆØ¨Ø± Ù‡ÙŠØ±Ùˆ">
Â  <svg viewBox="0 0 220 220" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Zizo Superhero Human Idle">
Â  Â  <circle cx="110" cy="70" r="40" fill="#FFE0B2" stroke="#D62828" stroke-width="2" class="breath"/>

Â  Â  <path d="M70 60 Q110 20 150 60 Q140 40 110 40 Q80 40 70 60 Z" fill="#6D4C41"/>

Â  Â  <path d="M75 55 H145 V80 H75 Z" fill="#D62828" rx="10"/>

Â  Â  <g class="blink" id="eyes">
Â  Â  <circle cx="90" cy="67" r="8" fill="#FFFFFF"/>
Â  Â  <circle cx="130" cy="67" r="8" fill="#FFFFFF"/>
Â  Â  <circle cx="90" cy="67" r="4" fill="#263238"/>
Â  Â  <circle cx="130" cy="67" r="4" fill="#263238"/>
Â  </g>

Â  Â  <path id="mouth" d="M85 90 Q110 105 135 90" stroke="#263238" stroke-width="3" fill="none" stroke-linecap="round"/>

Â  Â  <rect x="70" y="110" width="80" height="50" rx="12" fill="#247BA0"/>

Â  Â  <circle cx="110" cy="135" r="10" fill="#FFD166" stroke="#D62828" stroke-width="2"/>
Â  <polygon points="110,127 112,132 117,132 113,135 114,140 110,137 106,140 107,135 103,132 108,132" fill="#FFFFFF"/>

Â  Â  <path d="M60 110 Q40 130 60 150 Q110 160 160 150 Q180 130 160 110 Z" fill="#E63946" opacity="0.85"/>

Â  Â  <g class="hand-arm" transform="translate(160,100)">
Â  Â  <path d="M0 0 C 10 -10, 16 -20, 18 -30" stroke="#FFE0B2" stroke-width="6" stroke-linecap="round" fill="none"/>
Â  Â  <circle cx="18" cy="-32" r="6" fill="#FFE0B2" stroke="#D62828" stroke-width="1.5"/>
Â  Â  <rect x="18" y="-50" width="5" height="18" rx="2.5" fill="#FFE0B2" stroke="#D62828" stroke-width="1.5"/>
Â  </g>

Â  Â  <rect x="80" y="160" width="16" height="8" rx="3" fill="#6D4C41"/>
Â  <rect x="124" y="160" width="16" height="8" rx="3" fill="#6D4C41"/>

Â  Â  <ellipse cx="110" cy="170" rx="28" ry="6" fill="#000000" opacity="0.08"/>
</svg>
</div>
<script>
const apiURL = "https://3rd-system-grades.johnmamdouh777.workers.dev/?name=";
let allNames = [];

// Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„ØªØ­ÙƒÙ… ÙÙŠ Ø§Ù„Ø´Ø®ØµÙŠØ©
const zizoElement = document.querySelector('.zizo');
const nameInput = document.getElementById("nameInput");

// Ø¯Ø§Ù„Ø© Ø§Ù„ØªØ­ÙƒÙ… ÙÙŠ Ø­Ø§Ù„Ø© Ø²ÙŠØ²Ùˆ (Idle, Thinking, Waiting, Result)
function setZizoState(state) {
Â  // Ø£ÙˆÙ„Ø§Ù‹: Ø¥Ø²Ø§Ù„Ø© Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£ØµÙ†Ø§Ù Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠØ© ÙˆØ§Ù„Ø®Ø§ØµØ© Ø¨Ø§Ù„Ø­Ø§Ù„Ø©
Â  zizoElement.className = 'zizo';

Â  // Ø«Ø§Ù†ÙŠØ§Ù‹: Ø¥Ø¶Ø§ÙØ© ØµÙ†Ù Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø¬Ø¯ÙŠØ¯
Â  if (state !== 'idle') {
Â  Â  zizoElement.classList.add(state);
Â  }

Â  // Ø«Ø§Ù„Ø«Ø§Ù‹: ØªØ­Ø¯ÙŠØ« ØªØ¹Ø§Ø¨ÙŠØ± Ø§Ù„ÙˆØ¬Ù‡ Ø¯Ø§Ø®Ù„ SVG
Â  const mouth = document.getElementById('mouth');
Â  const eyes = document.getElementById('eyes');
Â  
Â  if (mouth) {
Â  Â  // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† ØªØ¹Ø¨ÙŠØ± Ø§Ù„ÙÙ…
Â  Â  mouth.setAttribute('d', 'M85 90 Q110 105 135 90');
Â  Â  mouth.style.stroke = '#263238';

Â  Â  if (state === 'thinking') {
Â  Â  Â  // ØªØºÙŠÙŠØ± Ø§Ù„ÙÙ… Ù„ÙŠØ¹Ø¨Ø± Ø¹Ù† Ø§Ù„Ø­ÙŠØ±Ø© Ø£Ùˆ Ø§Ù„ØªØ±ÙƒÙŠØ²
Â  Â  Â  mouth.setAttribute('d', 'M85 95 L135 95'); // Ø®Ø· Ù…Ø³ØªÙ‚ÙŠÙ…
Â  Â  Â  mouth.style.stroke = '#E63946';
Â  Â  } else if (state === 'result') {
Â  Â  Â  // ÙÙ… ÙˆØ§Ø³Ø¹ ØªØ¹Ø¨ÙŠØ±Ø§Ù‹ Ø¹Ù† Ø§Ù„Ø³Ø¹Ø§Ø¯Ø©
Â  Â  Â  mouth.setAttribute('d', 'M85 90 Q110 120 135 90');
Â  Â  }
Â  }
Â  
Â  if (eyes) {
Â  Â  // Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ø±Ù…Ø´Ø© Ø¹Ù†Ø¯ Ø§Ù„ØªÙØ§Ø¹Ù„ Ø§Ù„Ù†Ø´Ø·
Â  Â  eyes.classList.remove('blink');
Â  Â  if (state === 'idle') {
Â  Â  Â  eyes.classList.add('blink');
Â  Â  }
Â  }
}


// ØªØ´ØºÙŠÙ„ Ø£ÙˆÙ„ ØµÙØ­Ø©
window.addEventListener("DOMContentLoaded", () => {
Â  document.getElementById("welcome").style.display = "block";
Â  setZizoState("idle"); // ØªØ¹ÙŠÙŠÙ† Ø²ÙŠØ²Ùˆ ÙÙŠ ÙˆØ¶Ø¹ Ø§Ù„Ø®Ù…ÙˆÙ„ Ø¹Ù†Ø¯ Ø§Ù„Ø¨Ø¯Ø¡
Â  loadNames();
});

// ØªØ­Ù…ÙŠÙ„ Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„Ø£Ø·ÙØ§Ù„
async function loadNames() {
Â  const cached = localStorage.getItem("allNames");
Â  if (cached) {
Â  Â  allNames = JSON.parse(cached);
Â  Â  return;
Â  }
Â  try {
Â  Â  const res = await fetch(apiURL + "load_names");
Â  Â  const data = await res.json();
Â  Â  if (data.names) {
Â  Â  Â  allNames = data.names;
Â  Â  Â  localStorage.setItem("allNames", JSON.stringify(allNames));
Â  Â  }
Â  } catch (err) {
Â  Â  console.error("Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£Ø³Ù…Ø§Ø¡", err);
Â  }
}
Â Â 
// Ø§Ù‚ØªØ±Ø§Ø­ Ø§Ù„Ø£Ø³Ù…Ø§Ø¡ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„ÙƒØªØ§Ø¨Ø©
nameInput.addEventListener("input", () => {
Â  setZizoState("thinking"); // Ø²ÙŠØ²Ùˆ ÙŠÙÙƒØ± Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„ÙƒØªØ§Ø¨Ø©
Â  const val = nameInput.value.trim();
Â  const box = document.getElementById("suggestions");
Â  box.innerHTML = "";
Â  if (!val) return;
Â  const matches = allNames.filter(n => n.includes(val)).slice(0,5);
Â  matches.forEach(name => {
Â  Â  const div = document.createElement("div");
Â  Â  div.textContent = name;
Â  Â  div.onclick = () => { nameInput.value = name; box.innerHTML = ""; setZizoState("idle");};
Â  Â  box.appendChild(div);
Â  });
});

// Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù„ØµÙØ­Ø© Ø§Ù„Ù†Ù‚Ø§Ø·
function goToPoints() {
Â  document.getElementById("welcome").style.display = "none";
Â  document.getElementById("pointsPage").style.display = "block";
Â  setZizoState("idle"); // Ø²ÙŠØ²Ùˆ ÙŠØ¹ÙˆØ¯ Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø®Ù…ÙˆÙ„ Ø¨Ø¹Ø¯ Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„
}

// Ø¬Ù„Ø¨ Ø§Ù„Ù†Ù‚Ø§Ø·
async function getPoints() {
Â  setZizoState("waiting"); // Ø²ÙŠØ²Ùˆ ÙÙŠ Ø­Ø§Ù„Ø© Ø§Ù†ØªØ¸Ø§Ø± Ø£Ø«Ù†Ø§Ø¡ Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
Â  const name = nameInput.value.trim();
Â  const resultBox = document.getElementById("result");
Â  if (!allNames.includes(name)) {
Â  Â  resultBox.innerText = "âŒ Ø§Ù„Ø§Ø³Ù… ØºÙŠØ± Ù…Ø³Ø¬Ù„";
Â  Â  setZizoState("thinking"); // ÙŠØ¹ÙˆØ¯ Ù„Ø­Ø§Ù„Ø© Ø§Ù„ØªÙÙƒÙŠØ± Ø¨Ø¹Ø¯ Ø®Ø·Ø£
Â  Â  return;
Â  }
Â  const res = await fetch(apiURL + encodeURIComponent(name));
Â  const data = await res.json();
Â  if (data.error) {
Â  Â  resultBox.innerText = data.error;
Â  Â  setZizoState("thinking"); // ÙŠØ¹ÙˆØ¯ Ù„Ø­Ø§Ù„Ø© Ø§Ù„ØªÙÙƒÙŠØ± Ø¨Ø¹Ø¯ Ø®Ø·Ø£
Â  } else {
Â  Â  resultBox.style.opacity = 0;
Â  Â  setTimeout(() => {
Â  Â  Â  resultBox.innerHTML = `
Â  Â  Â  Â  ğŸ‘¤ Ø§Ù„Ø§Ø³Ù…: ${data.name}<br>
Â  Â  Â  Â  â­ Ø§Ù„Ù†Ù‚Ø§Ø· Ø§Ù„ÙƒÙ„ÙŠØ©: ${data.total}<br>
Â  Â  Â  Â  ğŸ Ø§Ù„Ù†Ù‚Ø§Ø· Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…Ø©: ${data.used}<br>
Â  Â  Â  Â  â– Ø§Ù„Ù†Ù‚Ø§Ø· Ø§Ù„Ù…Ø®ØµÙˆÙ…Ø©: ${data.minus}<br>
Â  Â  Â  Â  ğŸ† <strong>Ø§Ù„Ù…Ø­ØµÙ„Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©: ${data.final}</strong>
Â  Â  Â  `;
Â  Â  Â  resultBox.style.opacity = 1;
Â  Â  Â  setZizoState("result"); // Ø²ÙŠØ²Ùˆ ÙŠÙ‚ÙØ² ÙØ±Ø­Ø§Ù‹ Ø¨Ø§Ù„Ù†ØªÙŠØ¬Ø©
Â  Â  Â  celebrate(); // ØªØ´ØºÙŠÙ„ Ø§Ù„ÙƒÙˆÙ†ÙÙŠØªÙŠ
Â  Â  }, 200);
Â  }
}

// ØªÙˆÙ„Ø¯ ÙÙ‚Ø§Ø¹Ø§Øª Ø¹Ø´ÙˆØ§Ø¦ÙŠØ©
const layer = document.getElementById('floatLayer');
for(let i=0;i<24;i++){
Â  const b=document.createElement('div');
Â  b.className='bubble';
Â  b.style.left=Math.random()*100+'vw';
Â  b.style.animationDuration=(10+Math.random()*12)+'s';
Â  b.style.animationDelay=(Math.random()*5)+'s';
Â  b.style.opacity=0.6+Math.random()*0.4;
Â  layer.appendChild(b);
}

// Ø²Ø± Ø§Ø­ØªÙØ§Ù„: ÙƒÙˆÙ†ÙÙŠØªÙŠ
document.addEventListener('keydown', (e)=>{
Â  if(e.key==="Enter"){celebrate();}
});
function celebrate(){
Â  for(let i=0;i<40;i++){
Â  Â  const conf=document.createElement('div');
Â  Â  conf.style.position='fixed';
Â  Â  conf.style.left=Math.random()*100+'vw';
Â  Â  conf.style.top='-10vh';
Â  Â  conf.style.width='10px';
Â  Â  conf.style.height='16px';
Â  Â  conf.style.background=['#FF6B6B','#2EC4B6','#FFA6C1','#FFD166'][Math.floor(Math.random()*4)];
Â  Â  conf.style.transform=`rotate(${Math.random()*360}deg)`;
Â  Â  conf.style.zIndex=4;
Â  Â  conf.style.borderRadius='3px';
Â  Â  conf.style.boxShadow='0 2px 6px rgba(0,0,0,0.2)';
Â  Â  document.body.appendChild(conf);
Â  Â  const duration=8+Math.random()*6;
Â  Â  conf.animate([
Â  Â  Â  { transform: conf.style.transform, top: '-10vh', opacity: 1 },
Â  Â  Â  { transform: `translateY(100vh) rotate(${Math.random()*360}deg)`, top: '100vh', opacity: 0.8 }
Â  Â  ], { duration: duration*1000, easing: 'cubic-bezier(.25,.8,.25,1)' }).onfinish=()=>conf.remove();
Â  }
}
</script>
</body>
</html>
